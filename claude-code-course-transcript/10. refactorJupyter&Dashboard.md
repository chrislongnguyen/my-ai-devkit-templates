Claude Code has tools for reading and editing Jupyter notebooks.
0:06
In this lesson, we'll go through
0:08
our second example and use Claude Code
0:10
to refactor a Jupyter notebook and transform it into a dashboard.
0:14
Let's get to it. So far we've
0:16
seen how to use Claude Code to
0:17
work with web applications on the front end and back end.
0:20
Now let's shift gears and showcase how to
0:23
use Claude Code to work with a Jupyter notebook.
0:25
I have a Jupyter notebook here
0:27
with some e-commerce data that is fictitious.
0:30
This ecommerce data is reading information from a few CSVs
0:34
that I have in this ecommerce_data folder.
0:37
I'm using pandas to read data from the CSV.
0:41
I'm displaying some information here, reading some other CSVs,
0:45
and as you can see here,
0:46
I'm getting the answers that I want,
0:48
but this data is not really the most organized.
0:50
I'm getting some statistical information,
0:53
but the formatting and the display might not
0:55
be what I'd like out of the box.
0:57
As I go through and take a
0:58
look at some more of this information.
1:00
I can start to see that I'm beginning to do some more
1:02
complicated procedures here. One of the things that I'd
1:06
like to get out of this data
1:08
are some insights around things like how
1:09
much revenue did we generate year over year.
1:11
Specifically, 2023 to 2022.
1:15
I have the necessary operations here
1:17
to do what I want. In fact, there's a little
1:19
bit of merging between two different CSVs and data frames.
1:22
And here, I'm working my way towards the answer that I want,
1:25
but there are some warnings that I'm seeing here.
1:28
at the same time, it takes a while just to show visually
1:31
what I want and how best to display it.
1:33
So while I do end up getting the numbers that I want,
1:35
it's a little bit tedious and messy. I
1:37
want a way to better showcase this information
1:39
and I want to explore how I can refactor this Jupyter notebook.
1:43
As we see in a few other sections,
1:45
I'm trying to calculate some high level metrics like average order values
1:48
and not only am I looking for
1:50
this number, but this is just for 2023.
1:52
What happens when I want 2024 and so on.
1:55
As we scroll down, we'll see some visualizations
1:58
that are pretty good. But I think we could do better.
2:00
As we work our way towards the
2:01
bottom, we're still calculating more of these
2:03
high level values like sales by state.
2:05
We're generating some visualizations again, but I think we could do
2:08
much better as we start to use tools like Claude Code.
2:11
So with that in mind, let's
2:13
showcase how we can use Claude Code
2:14
to refactor this notebook and better
2:17
consolidate our business logic from our presentation.
2:19
So I'm going to go ahead and open up Claude, and
2:21
I'm going to put in a prompt that I have here
2:23
that references the notebook as well as the other files that
2:27
that I'm working with. I'm going to
2:28
go ahead and paste in this prompt.
2:30
And then I want to talk a
2:31
little bit about what's actually happening here.
2:33
So before I paste in this prompt,
2:35
I'm actually going to make a new markdown file
2:37
just to showcase what this looks like and
2:39
walk through why we've done what we're doing here.
2:42
Notice here, I'm referencing the name of the file using this sign,
2:45
as well as the name of the folder using this as well.
2:48
If you're ever unsure of how best to prompt
2:51
or how best to ask Claude for what to do,
2:54
you can always ask Claude as well. So many
2:56
times, I find myself using tools like Claude AI
2:58
or even Claude Code and just asking
3:00
Claude, here's what I want to do,
3:02
give me the best possible prompt to accomplish this task.
3:06
In our case, we have some Refactoring Requirements
3:09
for how we want the structure to be laid out.
3:11
We have Code Quality Improvements and some asks that we have
3:14
for particular Python files that we want.
3:17
What we're asking Claude to do
3:19
here is create a separate Python file
3:21
for loading our data and processing it.
3:23
And then another Python file for calculating these metrics.
3:27
This separation of concerns is going to allow us to better test
3:30
and better understand what the code is that's powering
3:34
these visualizations that we make in our refactored notebook.
3:37
We're also asking for improved visualizations.
3:40
We're being a little bit more
3:41
specific with what we mean by that.
3:43
Finally, we want to have a little bit
3:45
more configuration around the data that we're working with.
3:48
In general, it's a good practice to
3:50
let Claude know what you're expecting here.
3:52
So instead of just refactor this, give me
3:55
underlying asset for a refactored notebook.
3:57
Give me a way to document
3:59
my functions and calculate my business metrics.
4:02
and then give me some other important files for the dependencies I'm
4:05
working on, as well as a README explaining how to use this.
4:08
So let's go ahead and copy this and paste it in.
4:11
And you'll notice that after you paste a certain number
4:14
of lines, Claude Code is not going to show you everything.
4:16
to keep things a little bit more concise in the terminal.
4:19
So let's go ahead and run this prompt.
4:21
As we've done with other kinds of tools,
4:23
we're going to be using a slightly different suite of tooling here.
4:26
instead of reading, we're going to be dealing with notebook reading.
4:29
But the same to-do list that we
4:31
saw before, it's going to be executed
4:32
just like we've gotten very accustomed to with Claude Code.
4:36
Here we're using that read notebook.
4:38
We're going to explore those cells, we're going to analyze the structure
4:41
and create the refactored notebook that we expect.
4:44
Once this is done, we should expect
4:45
to see not only some powerful visualizations,
4:48
but also some other files with helper functions
4:51
for loading data, processing data,
4:54
and calculating the business metrics that we need.
5:01
accept the changes to these Python files
5:04
and we'll see that Python is being
5:05
written for us using the right tool.
5:07
We'll then go ahead and write another Python file with metric calculations
5:12
for our eventual data and display. As
5:14
Claude Code is working through these individual tasks,
5:17
we can always examine the files that have been created.
5:20
We can give that a look and
5:22
we can see right out of the box
5:23
this kind of object-oriented approach is much cleaner than
5:27
trying to embed everything directly inside of our notebook.
5:30
We can see the same thing for our business metrics calculation.
5:33
and we can see here, the ability to calculate, passing
5:37
in data frames and returning visualizations and validation of that data.
5:40
Looks like we've created our business metrics,
5:43
and finally, our notebook, our requirements.txt, and soon to be our README.
5:48
So while this is running, let's
5:49
take a look at the refactored notebook.
5:51
Let's go ahead and make sure we can run
5:53
all of these cells as expected.
5:55
Right off the bat, this is
5:56
looking a bit nicer visually for us.
5:58
I see here that it's trying to read
5:59
the prompt, and I'll just let Claude know,
6:01
no need to read the prompt, just finish making the README.
6:04
As I take a look at this notebook, I can
6:06
see right out of the box, this is much, much nicer.
6:08
I'm getting analysis into what data I'm looking at,
6:11
and also some configuration to work with.
6:13
I can specify the years and comparison data
6:15
and even any month if I want as well.
6:17
I'll be using these constants across the notebook.
6:20
Here I can see the data loading that's required
6:22
here are the custom modules that I have from my classes.
6:25
So, as I'm running all of these cells,
6:27
looks like things are pretty good so far.
6:29
But if I scroll down a little bit more, I'll actually see
6:31
that there's an error here. I can see right
6:33
off the bat, the problem here appears to be
6:35
some kind of key error. So I'm going
6:36
to ask Claude to fix that for me.
6:38
I'll say I'm getting KeyError
6:40
when I run a particular cell. I could
6:42
try to have Claude Code figure that out for me,
6:44
but I'm actually going to give Claude Code
6:46
the code that I used so that
6:48
it has a little bit more context.
6:49
Claude Code is going to take a
6:50
look at what needs to be done.
6:51
see what the issue is and make the change for us.
6:54
All right, let's go ahead and run these
6:55
cells now that this changes have been made.
6:56
And let's go make sure that things are looking a bit better.
6:58
You can see here as I scroll down,
7:00
I'm not seeing those errors that I was before.
7:01
And now let's take a look at some
7:03
of the business metrics that it's returning to me.
7:04
Getting nicer displays of summaries, information on customer satisfaction,
7:08
that's a little bit easier to
7:09
work with than what I had before.
7:11
As we shift gears towards our revenue analysis,
7:13
we can start to see clearer values, more displayed information
7:18
and a little bit of work to
7:19
more easily display the data we're working
7:21
with the visualizations appear to be more pleasant looking.
7:24
we can see as we look at category performance,
7:27
we've got some even better tools to
7:29
analyze categories and revenue associated with them.
7:31
As we look at our geographic performance,
7:33
we're seeing a nice visualization by state.
7:35
We can hover over that to get
7:37
even more information on a state-by-state basis.
7:38
As we work our way to the bottom,
7:40
when we take a look at additional delivery analysis,
7:43
things are looking good as expected.
7:45
So we've done a nice job refactoring this notebook
7:48
to more visually display information and separate our concerns.
7:50
But what I'd like to do now is
7:52
move from a notebook to a web-based interface
7:54
with a nice dashboard powered by Streamlit.
7:57
If you're not familiar with Streamlit, it's a Python library
8:00
that's useful for displaying interfaces, particularly dashboards,
8:03
and it's very easy to seamlessly transition
8:06
from notebooks to these Python files.
8:08
So let's go ahead and make
8:09
a new markdown file with our prompt
8:11
that we'll call convert-to-dashboard.md
8:13
And let's walk through what we're going to
8:15
put in here. We're going to ask Claude
8:17
to convert our refactored notebook into a professional
8:20
professional Streamlit dashboard with this exact layout.
8:23
We could start just with this first line,
8:25
but in order to avoid lots of back
8:26
and forth, let's just tell Claude what we want.
8:29
We want a header with a title and filter,
8:31
we want KPIs with cards for revenue,
8:33
growth, toward average order value and total
8:35
orders. And then we want some charts.
8:38
revenue, categories, revenue by state, and a bar chart with satisfaction.
8:42
At the bottom row, we want two cards,
8:44
and we want to be specific for the way
8:46
in which we display our data and render this information.
8:49
So with that in mind, let's
8:50
go ahead and give this a shot.
8:51
Let's migrate from notebooks to visual interfaces using Streamlit.
8:55
We can see that it's created our dashboard,
8:58
and as it's going, we can take
8:59
a look at what's being done here.
9:01
We're importing Streamlit, bringing in pandas,
9:03
bringing in some visualizations including Plotly.
9:06
And then here you can see we're displaying some custom CSS for
9:09
styling, setting up our page configuration.
9:12
Most of this really comes from that st
9:14
object that I have to work with Streamlit. We've updated our requirements.
9:18
txt, and here we're actually going to create a README
9:21
displaying everything that's going on in the dashboard.
9:23
In fact, I'll just tell Claude right now,
9:26
don't make a new README, just modify the one we have.
9:29
In many of these longer plans, it's
9:30
very easy to just let Claude go,
9:32
but sometimes you want to stop the process
9:35
and have it navigate the way that
9:36
you want. Now that we've created this dashboard,
9:38
let's open up a new terminal window to start our server.
9:41
In this terminal window on the left, I'll start the server using
9:44
streamlit run and then the Python file that's going to be
9:48
displayed dashboard.py. We can see here
9:50
that I don't have the Streamlit command.
9:53
So I can see here, in
9:54
order to get everything up and running,
9:56
I need to install these dependencies.
9:57
So let's go ahead and do that.
9:59
I'll run my pip install command,
10:01
install all the necessary dependencies and make sure
10:04
that when the server loads, I don't have
10:06
any issues with the dependencies in this application.
10:08
Once that's done, I'll go ahead and run my server.
10:11
And I'll do that using the streamlit run command.
10:14
So let's go ahead and type in streamlit
10:16
run and the name of our Python file.
10:17
Python file just like it suggests right here.
10:20
Back in the browser, here's what things look like.
10:22
I've got some revenue, I've got some growth.
10:24
As we scroll down a little bit,
10:25
we're definitely going to want to verify
10:27
that these numbers are what we expect.
10:28
And we see that some things are still missing a little bit.
10:32
When we take a look at this
10:33
dashboard, it's a pretty good start, but we
10:34
can see that we're missing a couple things.
10:37
It looks like these cards here are empty
10:39
and actually redundant because we're getting the information that we want.
10:44
At the same time, it's a little difficult to start with 2024.
10:47
because we're not seeing much information year over year.
10:51
So maybe we should ask Claude
10:53
to not only clean up these pieces,
10:55
but also start with a default year of 2023,
10:59
so we can have some slightly nicer visualizations.
11:02
but also make sure we have the ability
11:04
to filter based on the month as well.
11:06
The reason why we'll want to start with 2023
11:09
is because we don't have data for every single month for 2024.
11:14
So as we start to look at
11:15
this, the monthly growth is
11:16
a little bit confusing.
11:19
And the data here, we just don't have yet.
11:22
So let's go make those asks, put them back in Claude.
11:24
This is a good start, but I want to
11:26
implement the following changes.
11:28
Let's go ahead and make a
11:30
new line here and first we'll start
11:32
with making sure the default year is 2023.
11:36
Next, ask Claude to add filters for months as well.
11:40
And then finally, we'll make sure
11:42
to remove the empty card for each.
11:46
So, let's update the code in our dashboard for these particular tasks.
11:48
We'll set the default year to 2023, which looks good.
11:52
And here we'll add some filters for months.
11:53
Now let's update the revenue chart to handle
11:55
the case where we're filtering by a specific month.
11:58
We can see the CSS is changing as well.
12:00
So it looks like this chart container
12:01
should be a little bit cleaner than before.
12:03
Let's go back to the browser, see what things look like.
12:06
We can see that 2023 is
12:07
the default, which is a good start.
12:09
We can also see that those
12:11
empty cards are gone, which is great.
12:13
We'll stop here for now, but you can imagine as you keep
12:15
prompting, you can create more powerful visualizations.
12:18
But in a short period of time, we started with a notebook
12:20
that was a bit disorganized,
12:22
was a little hard to read and understand.
12:25
And we migrated now to a dashboard that we can deploy,
12:28
share with team members and iterate on quickly.
12:31
In the next lesson, we'll build a Next.js application
12:34
and use Claude Code to connect to MCP servers
12:38
for Figma and Playwright to take a mockup and build a
12:42
powerful web application with Claude Code quickly.