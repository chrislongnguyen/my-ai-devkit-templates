Now that you have an understanding
0:03
of the chatbot codebase, let's add features to the UI
0:06
and implement a new tool for the chatbot.
0:09
Now that we've gotten up to speed on this codebase,
0:12
let's talk a little bit about
0:14
some features we might want to add.
0:16
We saw before, in this application,
0:18
when we ask for an outline of a course,
0:21
we get some really detailed information
0:23
and we even see some of the sources that are referenced.
0:27
At the same time, when we see
0:29
these sources that are referenced, it would be really nice
0:32
to be able to click on these as links and go to
0:35
the source of truth.
0:37
So we want to build an interface
0:39
where the front end and back end
0:41
are correctly rendering links to show where
0:44
this data is coming from
0:46
and not just some text.
0:48
So let's hop over to Claude and talk
0:50
a little bit about how to get started.
0:52
What we're going to do here instead of
0:54
just asking Claude to implement the feature necessary,
0:57
we're going to make use of two important pieces.
1:00
The first one is referencing the correct file,
1:03
and the second is using plan mode.
1:06
When we talk about referencing the correct file,
1:08
Claude Code is only as good
1:10
as the context that you give it.
1:12
So when you ask Claude Code to make changes,
1:15
it's important to make sure that we're figuring
1:18
out the right files we need to modify.
1:20
We can have Claude Code try to figure this out,
1:23
but if we know out of the box
1:25
what files need to be modified, giving
1:28
in Claude Code this context right
1:30
away makes the tool much more
1:31
efficient. So let's see how that's done.
1:34
I'm going to open up Claude Code and to reference a file,
1:37
I simply use this at and tag that file.
1:41
For a folder, I can reference files inside.
1:44
For a file directly, I can go ahead
1:47
and even use tab to complete for the full file name.
1:50
With that in mind,
1:52
let's talk next about the second
1:54
important piece when building features or making
1:57
larger changes. Instead of having Claude trying to figure out what
2:01
needs to be done and write the code right away.
2:04
We're going to follow a slightly
2:06
different pattern. We're going to plan first.
2:08
We're going to have Claude create a detailed
2:11
plan for what changes need to be done.
2:14
And if we approve that plan,
2:16
we're then going to have Claude Code
2:17
make changes to quite a few files.
2:19
When you have slightly larger changes to make,
2:22
we always recommend starting with plan mode
2:25
so you can give Claude the opportunity
2:27
to figure out what needs to be done
2:29
before it needs to make those changes. To activate plan mode,
2:33
I'm going to press shift tab twice.
2:35
And we'll see here that plan mode is on.
2:38
Let's showcase what needs to be done. I'm going
2:39
to bring in a prompt that I have here,
2:41
and I'm going to ask it
2:43
to build an interface with source citations.
2:46
You can notice here that I'm referencing the correct files
2:49
as well as referencing other files where changes need to be made.
2:53
So let's give Claude the opportunity to come up
2:56
up with a plan for how to solve this particular problem.
2:59
As always, it's going to read through
3:01
the files that it thinks are most necessary.
3:03
It's going to trace its way from the front end
3:06
to the back end and understand what needs to be implemented.
3:09
Once we finish getting a plan, we're going to have the opportunity
3:12
to either approve it or to give Claude
3:14
some feedback for what might need to be changed.
3:17
But here, Claude is not directly writing any code.
3:21
As we see here, we can accept and
3:23
then continue to auto-accept edits so we can
3:25
don't have to keep asking for permission.
3:27
We can manually approve them or we
3:29
can tell Claude to change the
3:30
plan. Taking a quick look at this,
3:32
I feel pretty good about what we need to do.
3:34
So let's use that plan with our auto-accept edits.
3:37
If you ever want to turn this on on its own,
3:40
you can press shift tab just one time.
3:42
We'll see the to-do list necessary.
3:45
We'll see what changes need to be made.
3:47
And now we're going to let Claude Code
3:49
write to the files that it seems necessary,
3:51
and then we can test that the implementation works correctly.
3:54
correctly. We'll see here, files are being modified,
3:57
changes are being made to the codebase.
4:00
And since we added the auto
4:01
accept, we don't have to keep giving
4:03
permission over and over.
4:05
Very common workflow that we see is users start by asking
4:10
for permission each time.
4:11
And as more trust is given by the human to Claude Code,
4:15
the auto-accept edits come on a bit more.
4:17
We can see here finally, that we
4:19
can start the application to test the implementation.
4:22
But in fact, the server is running already.
4:25
So I'm just going to tell Claude, no, thank you.
4:27
I'll say right off the that, the server is running.
4:30
No need to start it yourself.
4:32
If I want Claude Code to always do that,
4:35
this is a great opportunity to just
4:37
put something into the CLAUDE.md file as well.
4:40
Now that I've let Claude Code know that, it's
4:42
going to tell me the changes that have been made.
4:44
So let's test this. Now let's try asking the same question.
4:48
Let's ask for an outline of a course.
4:51
And if this has been built
4:52
correctly, you should be able to see
4:54
links below for each one of these particular features.
4:58
If I take a look, right here I have links
5:01
that will take me to the right place,
5:03
but the interface is a little bit difficult to see
5:06
because of this blue link color.
5:09
If I'd like, I can go ahead and ask
5:11
Claude Code to make the change necessary to do so.
5:14
So let's go and follow up with Claude
5:16
and ask it to make this interface a little bit more pleasant.
5:19
One option that I have here is just to tell Claude.
5:23
here is what I want. Another option is to use Claude's visual
5:26
ability to take a look at a screenshot
5:29
and analyze what needs to be changed.
5:32
So let's take a screenshot of what this interface looks like.
5:35
and we're going to go ahead and paste that into Claude Code.
5:39
Back in Claude Code, when I
5:41
paste that screenshot, I'm going to say,
5:44
these links are hard to read.
5:45
Can you make this more visually appealing?
5:49
We're going to go ahead and give Claude the ability to analyze
5:52
that image and figure out where things need
5:54
to be changed on the front end.
5:56
And we can see here I can see the issue.
5:58
The links are using a default blue color.
6:01
Let me go ahead and make a change.
6:03
When you need Claude Code to make visual changes,
6:06
taking screenshots and showing Claude Code the screenshot
6:09
is a very powerful way of quickly iterating against what we need.
6:13
Let's go back to the browser
6:14
and see what things look like now.
6:16
We'll ask again for an outline of a course.
6:19
And if this is done what we've
6:21
expected, we should see that these links
6:22
are a bit nicer to take a look at.
6:25
Let's take a look at our
6:27
sources and look at that. Much better.
6:29
The ability for Claude Code to see screenshots and make changes
6:33
is one of the most commonly used features we see
6:36
and incredibly valuable to build things quickly.
6:38
If I want to see those changes to files,
6:40
I can open those up in VS code
6:43
and Claude Code here will notice I'm in that particular script
6:46
and I can ask questions and get information necessary for those files.
6:50
files. This is looking good. Let's add a new feature.
6:54
Instead of building off in the context window what I have now,
6:59
I'm going to start completely from scratch and clear the conversation history.
7:04
This is going to allow me to
7:06
have a longer context window to work with
7:09
and not have Claude get potentially
7:11
confused with things that it's seen before
7:13
that are not relevant to what I'm building now.
7:16
As we saw before, when we want to build newer features,
7:19
we're going to use plan mode.
7:21
In this particular application, I want to add the ability
7:25
to start a new chat in my interface.
7:28
So instead of having to refresh the page each time,
7:31
I'd love for a button here to allow me
7:34
to reset the conversation and start a new chat again.
7:38
So let's build that. I'm going to activate plan mode.
7:40
and I'm going to go ahead and
7:41
bring in the prompt that I have here.
7:43
I'll ask Claude Code to add a new chat button
7:46
and when clicked, it should clear the conversation in the chat window.
7:49
start a new session and handle the necessary clean up.
7:53
If you ever need to make
7:54
a new line and add more context,
7:57
you can use backslash and press enter.
7:59
So if there is more I want
8:00
to add here, I can easily do so
8:02
that's a bit more visually appealing.
8:05
So let's have Claude Code figure
8:06
out what needs to be built here.
8:08
As we saw before, if there are
8:09
changes to the front end that we need,
8:11
it will find the necessary folders,
8:13
changes to the back end, the same kind of thing.
8:16
And here, it's going to come up with a comprehensive plan.
8:18
This idea of being able to plan and think before taking actions
8:23
is incredibly valuable to build the interfaces that you want.
8:27
I can take a quick look through this plan. I
8:29
can see what it's trying to do and I feel good,
8:32
so let's build it. If at any point
8:33
in time, I don't like what's being done,
8:36
I can always press escape and
8:38
navigate Claude Code in a different direction.
8:40
As always, we'll see our to-do list that needs to be built.
8:43
We'll see these files being updated
8:45
since I have auto accept edits on and
8:48
once that's done, we'll move on to the next step.
8:50
We'll start seeing some JavaScript being added
8:53
for when clicks occur, starting new conversations.
8:56
We'll see clearing inputs and focusing,
8:58
and now building a little bit of styling to match existing sections.
9:03
We can see here, it's going to test the new functionality.
9:06
And if I need to tell Claude to not run
9:08
the server, I can gladly do so if I want.
9:11
So here, instead of running the server,
9:12
I'll just tell Claude, don't do it.
9:14
And since I'm going to find myself
9:16
doing that a lot, now is a good
9:17
at the time to say,
9:18
don't run the server using
9:20
./run.sh
9:22
I will start it myself.
9:24
I'm going to put this actually in the project memory.
9:27
If I want all other developers to do the same.
9:30
But maybe other developers might want to run the server themselves.
9:34
So I'll put that in the
9:36
project memory that's local and git ignored.
9:39
So this might be a situation where
9:41
I like to run the server myself,
9:43
but maybe other developers don't. Great use case for that Claude
9:46
local MD file. Now let's go back
9:48
to the browser and see what we built.
9:50
I'll refresh the page. And we've got this new chat button here.
9:53
Let's see if it works. We'll ask
9:55
again for an outline of the course.
9:57
We can make sure that our source links look great.
9:59
And if this does what's expected,
10:02
we can click on this button and start a new conversation.
10:04
That's looking good. Let's start a new chat.
10:07
So, even though this is working,
10:09
it still doesn't look exactly the way that I want.
10:12
And I can take screenshots and go back and forth with Claude.
10:16
or I can enhance
10:18
the tools that Claude Code has
10:21
out of the box using MCP servers.
10:25
MCP or the Model Context Protocol,
10:28
allows for tools like Claude Code
10:31
to gain additional functionality
10:33
to external data sources and systems.
10:36
What I'm going to do here
10:38
is add an MCP server for Playwright,
10:41
a popular tool for opening up a browser,
10:44
taking screenshots, and analyzing those screenshots. So instead of me manually
10:49
having to take the screenshot and have a conversation with Claude,
10:53
we're going to let Claude do it all by itself.
10:56
The first thing I'm going to
10:57
do is quit out of Claude Code
10:59
and add the necessary MCP server.
11:02
And the command to do so is claude
11:04
mcp add, the name of our MCP server, which is playwright,
11:09
and then the underlying command to start that MCP server.
11:13
That is done using npx @playwright/mcp@latest.
11:19
For any MCP server that you want to include,
11:22
you can reference the documentation.
11:24
All MCP servers will specify the necessary
11:27
command to connect to that particular server.
11:31
Let's open up Claude again and we'll
11:33
see what our MCP server looks like.
11:35
We can use the /mcp command
11:37
and here we can see that we have connected successfully
11:41
to the Playwright MCP server and we can see the tools
11:44
available that the Playwright server is giving us.
11:47
Things like evaluating JavaScript, uploading files,
11:51
pressing a key, navigating, going back.
11:54
All of these things that we might manually test,
11:56
Playwright can do that programmatically for us.
12:00
I'll press escape to go back a few times,
12:02
and let's ask Claude Code to navigate
12:05
to figure out how to build the necessary
12:07
content. So let's go and ask Claude Code
12:10
using the Playwright MCP server
12:12
visit the page that we're at
12:15
and view the new chat button.
12:18
I want that button to look the same as the other
12:22
links below for Courses and Try Asking.
12:27
Make sure this is left aligned
12:30
and that the border is removed.
12:33
Before it starts taking this action,
12:35
it's going to ask me for approval for these particular tools.
12:39
We'll see that it will visit
12:40
that page, take a screenshot and do do what's necessary.
12:44
Let's follow that and not ask for
12:46
permission each time to use this particular tool.
12:49
We can see here that the browser has opened a
12:52
new tab programmatically to our page to take a screenshot.
12:56
We'll ask Claude Code to take that screenshot
12:58
and analyze what it sees.
13:01
Here it can see the exact issue that's happening and instead of
13:05
us manually having to take the
13:07
screenshots necessary, it can programmatically fix itself.
13:09
We could have a more specific prompt as well, that keeps asking
13:13
Claude Code to make those changes necessary.
13:15
Since I don't have auto accept on, I can see the change
13:18
that's being made in VS Code.
13:20
And right out of the box, I don't
13:22
see a border and background with this
13:23
new change. That looks good to me.
13:25
Let's make those changes and continue making other changes.
13:28
I can see left align looking good.
13:31
and any other changes that need to be made here.
13:34
It's going to take another screenshot to
13:36
verify that the changes it's made look correct.
13:38
that it has the right icon prefixes used.
13:41
match other sections. With that in
13:43
mind, let's go see how he did.
13:45
I'm going to refresh the page. and it's looking good.
13:48
It's got an extra plus here. So why don't we go ahead
13:50
and ask it to take that
13:52
out. But it's left aligned and it's
13:53
using the icon that we like before.
13:56
So let's go ahead and fix this up and say,
13:59
there are now two plus icons, remove the
14:01
one closer to the text "+ New Chat"
14:04
We can see here there's already a plus in the HTML content,
14:07
so we'll remove that and let's see
14:09
what's done here. So instead of adding
14:11
that extra plus, we can see here what's being done.
14:13
If we need another snapshot, we
14:15
can visit and take a snapshot necessary.
14:18
As we can see here, Claude Code
14:20
saw there was not an open tab, so it fixed itself,
14:23
opened it up again and took the necessary screenshot.
14:27
Let's see what that looks like now. Much better.
14:30
As you can imagine, building complex interfaces
14:33
using tools like MCP playwright
14:36
makes building, designing and testing a breeze. We've made some really
14:40
nice front end changes. Let's now go and visit the back end.
14:43
Like we did before, we're going to start
14:46
fresh and instead of building off of this
14:48
conversation, we're going to start with a new one.
14:50
So let's clear the conversation history and start again.
14:54
This time, we want to build some features on the back end.
14:58
So let's put in a prompt, talk
14:59
about what's going to be done here.
15:01
I need to add another tool
15:03
that allows me to visit a particular course
15:07
and for each of those courses, see the
15:09
lesson number and the lesson title and description about that as well.
15:14
Right now, the data that I get
15:16
when I take a look at a course
15:18
is relatively high level. Let's see what I mean.
15:21
What we're going to ask Claude Code to do
15:23
here is to make a change to our search_tools.py file.
15:27
Let's take a look at that. And
15:28
in this file, we can see right now
15:30
that we just have one tool for searching
15:34
content and getting details about that particular course. This second tool
15:39
is going to allow us to get more descriptive information
15:43
for each of the lessons in these courses.
15:45
So let's see what Claude can do. As we've done previously,
15:49
let's make a plan and make
15:51
sure we're first okay with that plan
15:53
before we start making changes to individual files.
15:56
Claude Code can see the current
15:57
architecture, had to implement the outline tool,
16:00
and since we have that CLAUDE.md
16:02
previously, it's going to more quickly be able
16:04
to understand what needs to be done.
16:07
We can take a look at what needs to be implemented,
16:09
we can make sure that we're doing
16:11
the right things in the right files.
16:12
We can see that once we create this tool,
16:15
we update the system prompt to make
16:17
sure that we get that additional data,
16:19
and then we register that tool in our RAG system.
16:22
As always, if there's anything we want to
16:24
change or suggest, we can do that now.
16:27
But let's see what Claude Code can do for us.
16:29
If this works as expected,
16:31
we should be able to ask questions about a
16:34
course and get much more detail for those particular
16:37
lessons in the course.
16:39
We can see here that not only are we
16:42
modifying the underlying Python code, but also the system prompt
16:44
and here we're registering that new tool that we've made.
16:48
Once we finished our to-do list,
16:50
we can head back to the browser
16:52
and see what things look like
16:54
and if this has been implemented correctly.
16:56
We'll see a nice summary of what's been made
16:58
and we can always change things at any point in time.
17:01
Back in the browser, let's go ahead and try asking
17:04
for some information about a course.
17:06
If this works as expected.
17:08
We should be able to get more detailed information
17:11
including a link for that particular course.
17:14
Here, we can see the names of the lessons
17:16
and if we would like, we can even build additional functionality
17:20
to get sources for each one of those.
17:22
In the next lesson, we'll talk about what happens
17:25
when things go wrong and how we can use
17:27
Claude Code to debug, to write tests,
17:29
and make sure that we feel confident in
17:32
the software that we're writing alongside Claude Code.